<!-- HTML header for doxygen 1.8.15-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.15"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>51Degrees API Documentation: UA-CH Overview</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="examplegrabber.js"></script>
<script type="text/javascript" src="testedversionsgrabber.js"></script>
<script type="text/javascript" src="search51.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(initResizable);
/* @license-end */</script>
<link href="docs-main.min.css" rel="stylesheet" type="text/css" />
</head>
<body class="l-docs-index p-doxygen">
<div class="l-index__content">
<!--div id="top"--><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea" class="g-header g-header--docs">
  <h1 class="c-brand">
  <a id="projectlogo" href="index.html" class="c-brand__link"><img class="c-brand__image" alt="Logo" src="logo-51Degrees-Docs.png" style="width:172px;"/></a>
  <span class="c-tagline">51Degrees API Documentation
   &#160;<span id="projectnumber">4.5</span>
  </span>
  </h1>
  <div id="projectalign" style="padding-left: 0.5em;">
  </div>
  <div id="main-nav"></div>
  <section class="g-search">
    <div class="c-search is-openable" id="searchOpenable">
    <form class="c-search__form">
      <div class="b-form-group b-form-group--with-icon">
        <label for="inputSearch" class="b-text--hidden">Search</label>
        <img src="icon-search.svg" class="b-icon" alt="Search" />
        <input type="text" class="c-search__input" id="inputSearch" onkeyup="javascript:onSearch(this,event.keyCode)" placeholder="Search" aria-label="Search">
      </div>
    </form>
    <div class="c-search__content" id="searchContent">
    </div>
  </div> 
  </section>
</div>
<!-- end header part -->
<main class="g-main">
<!-- Generated by Doxygen 1.8.15 -->
<!-- top -->
	<div class="g-docs__sidenav">																														         <nav id="nav-tree-contents" class="c-sidenav">																														     <h4 class="c-sidenav__heading">Documentation</h4>																									         <div id="nav-sync" class="sync"></div>
  <ul class="c-sidenav__list">																														     </ul>																																				   </nav>    </div><script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('_device_detection__features__u_a_c_h__overview.html','');});
/* @license-end */
</script>
<div id="doc-content" class="g-docs__content">
<div class="PageDoc"><div class="g-docs__header">
<div class="c-breadcrumb">
  <ul class="c-breadcrumb">
<li class="c-breadcrumb__item"><a class="c-breadcrumb__link" href="_device_detection__index.html">Device Detection</a></li><li class="c-breadcrumb__item"><a class="c-breadcrumb__link" href="_device_detection__features__index.html">Device Detection Features</a></li><li class="c-breadcrumb__item"><a class="c-breadcrumb__link" href="_device_detection__features__u_a_c_h__index.html">User-Agent Client Hints</a></li><li class="c-breadcrumb__item"><a class="c-breadcrumb__link" href="_device_detection__features__u_a_c_h__overview.html">UA-CH Overview</a></li>  </ul>
</div>
<h2 class="g-docs__page-title">UA-CH Overview </h2></div><!--header-->
<div class="g-docs__inner">
<div class="g-docs__primary" id="primary">
<section class="g-docs__section"><h1 class="g-docs__section-heading">Introduction</h1>
<p>User-Agent Client Hints (UA-CH) are part of a Google proposal to replace the existing User-Agent HTTP header.</p>
<p>This page gives an overview of UA-CH detection in our API. It also provides guidance on which mechanism to use based on your use-case.</p>
<h2>Two ways to retrieve UA-CH values</h2>
<p>You can retrieve UA-CH values using either of these methods:</p>
<ul>
<li><b>HTTP headers</b> - Set headers in your response to ask the browser to send UA-CH values</li>
<li><b>JavaScript API</b> - Use client-side JavaScript to retrieve UA-CH values directly</li>
</ul>
<p>See the <a class="el" href="_device_detection__features__u_a_c_h__overview.html#UACH_Guidance">Guidance</a> section below if you're unsure which to use.</p>
<p>This topic has the following subpages:</p>
<ul>
<li><a class="el" href="_device_detection__features__u_a_c_h__headers.html">Headers</a> - How to use UA-CH HTTP headers with our API.</li>
<li><a class="el" href="_device_detection__features__u_a_c_h__javascript.html">JavaScript</a> - How to use the UA-CH JavaScript API with our API.</li>
<li><a class="el" href="_device_detection__features__u_a_c_h__required_uach_headers.html">Required Values</a> - Which UA-CH values do I need?</li>
</ul>
<h2>Examples</h2>
<p>We have examples that demonstrate UA-CH detection in various scenarios:</p>
<ul>
<li><a class="el" href="_device_detection__examples__getting_started__console__on_premise.html">On-premise console</a></li>
<li><a class="el" href="_device_detection__examples__getting_started__web__on_premise.html">On-premise web page</a></li>
<li><a class="el" href="_device_detection__examples__getting_started__console__cloud.html">Cloud console</a></li>
<li><a class="el" href="_device_detection__examples__getting_started__web__cloud.html">Cloud web page</a></li>
<li>Our <a class="el" href="_services__configurator.html">Configurator</a> site includes an example for implementing a full client-side solution</li>
</ul>
<p><b>Note:</b> Console examples work in any situation. Web examples require a browser that supports UA-CH (Chrome, Edge, or other Chromium-based browsers).</p>
<h1 class="g-docs__section-heading">Support for detection from Client Hints <a href="#UACH_Support">#</a><a class="anchor" id="UACH_Support"></a></h1>
<h2>Current support</h2>
<p>The 51Degrees Device Detection API provides comprehensive UA-CH support:</p>
<ul>
<li><b>Basic support</b> - We detect devices using the Sec-CH-UA header (since December 7, 2020)</li>
<li><b>Full support</b> - We detect devices, operating systems, and browsers from UA-CH headers (Version 4.4 and data files from <a href="https://51degrees.com/blog/updates-to-user-agent-client-hints-version-4-4">June 2022 onwards</a>)</li>
<li><b>Windows 11 detection</b> - We <a href="https://51degrees.com/blog/windows-11-detectable-with-uach">identify Windows 11 using User-Agent Client Hints</a> (the <a href="https://docs.microsoft.com/en-us/microsoft-edge/web-platform/how-to-detect-win11">only reliable method</a>)</li>
</ul>
<h2>JavaScript API support</h2>
<p>We added support for the UA-CH <a href="https://developer.mozilla.org/en-US/docs/Web/API/User-Agent_Client_Hints_API">JavaScript API</a> in:</p>
<ul>
<li>.NET API version 4.4.19</li>
<li>Data files from March 6, 2023</li>
</ul>
<h1 class="g-docs__section-heading">Guidance <a href="#UACH_Guidance">#</a><a class="anchor" id="UACH_Guidance"></a></h1>
<p>UA-CH offers several mechanisms for accessing values. This section explains our recommendations for different use-cases.</p>
<h2>On-premise API serving end-users directly</h2>
<p><b>Using our web integration:</b></p><ul>
<li>Ensure these properties are included: <code>SetHeaderBrowserAccept-CH</code>, <code>SetHeaderHardwareAccept-CH</code>, and <code>SetHeaderPlatformAccept-CH</code></li>
<li>All properties are included by default for on-premise</li>
<li>Our software automatically sets the <code>Accept-CH</code> header to request needed client hints</li>
</ul>
<p><b>Not using our web integration:</b></p><ul>
<li>See the 'non-integrated' section on the <a class="el" href="_device_detection__features__u_a_c_h__headers.html">UA-CH Headers page</a></li>
</ul>
<h2>On-premise API not serving end-users directly</h2>
<p><b>Recommended approach:</b></p><ul>
<li>Ask your clients to set the <code>Delegate-CH</code> meta http-equiv tag</li>
<li>Or have them set <code>Permissions-Policy</code> and <code>Accept-CH</code> response headers</li>
<li>This lets user browsers send UA-CH values to your service</li>
<li>See the 'B2B service supplier' section on the <a class="el" href="_device_detection__features__u_a_c_h__headers.html">UA-CH Headers page</a></li>
</ul>
<p><b>Alternative/backup approach:</b></p><ul>
<li>Use the UA-CH JavaScript API to retrieve values</li>
<li>See the 'non-integrated' section on the <a class="el" href="_device_detection__features__u_a_c_h__javascript.html">UA-CH JavaScript page</a></li>
</ul>
<h2>Calling cloud service from client-side code</h2>
<p><b>Best performance:</b></p><ul>
<li>Set <code>Delegate-CH</code> meta http-equiv tag or <code>Permissions-Policy</code> and <code>Accept-CH</code> response headers</li>
<li>See the 'Cloud' section on the <a class="el" href="_device_detection__features__u_a_c_h__headers.html">UA-CH Headers page</a></li>
</ul>
<p><b>Alternative approach:</b></p><ul>
<li>Ensure your Resource Key includes the <code>JavascriptGetHighEntropyValues</code> property</li>
<li>This gathers values automatically and sends them to our cloud service</li>
</ul>
<h1 class="g-docs__section-heading">Background reading <a href="#UACH_Background">#</a><a class="anchor" id="UACH_Background"></a></h1>
<h2>How UA-CH works</h2>
<p>The authors of the proposal have created an <a href="https://web.dev/user-agent-client-hints">article</a> covering how UA-CH works.</p>
<p>51Degrees has <a href="https://51degrees.com/resources/blogs/tag/Client%20Hints">blogged extensively</a> on the subject. We also have:</p>
<ul>
<li>An <a href="https://learnclienthints.com/">explainer site</a></li>
<li>A <a href="https://51degrees.com/client-hints">test page</a> that shows how UA-CH headers interact with Accept-CH and Permissions-Policy response headers</li>
</ul>
<h2>Google's rollout timeline</h2>
<p><b>May 2021:</b> Google <a href="https://blog.chromium.org/2021/05/update-on-user-agent-string-reduction.html">outlined</a> their UA-CH rollout plans. They confirmed that User-Agent deprecation wouldn't happen until at least 2022.</p>
<p><b>September 2021:</b> Google provided <a href="https://blog.chromium.org/2021/09/user-agent-reduction-origin-trial-and-dates.html">further detail</a> about the phased User-Agent deprecation:</p><ul>
<li>Start: Chrome 101 (roughly Q2 2022)</li>
<li>End: Chrome 113 (roughly Q2 2023)</li>
</ul>
<h2>Technical context</h2>
<p>User-Agent Client Hints extends the previously existing Client Hints content negotiation feature.</p>
<p><b>General documentation:</b></p><ul>
<li><a href="https://developer.mozilla.org/en-US/docs/Glossary/Client_hints">MDN Client Hints documentation</a></li>
<li><a href="https://web.dev/user-agent-client-hints/">Google's UA-CH guide</a></li>
</ul>
<p><b>Browser support:</b></p><ul>
<li><a href="https://caniuse.com/client-hints-dpr-width-viewport">Client Hints support</a></li>
<li><a href="https://caniuse.com/mdn-api_navigator_useragentdata">User-Agent Client Hints support</a></li>
</ul>
<h2>Additional resources</h2>
<p>On September 28, 2022, we hosted a webinar discussing User-Agent Client Hints and the future of the User-Agent. <a href="https://vimeo.com/755026259">Watch the webinar recording here</a>. </p>
</section></div><!-- PageDoc -->
</div><!-- primary -->
</div><!-- inner-->
<!-- HTML footer for doxygen 1.8.15-->
<!-- start footer part -->
<section id="nav-path" class="g-footer g-footer--docs"><!-- id is needed for treeview function! -->
    <p class="g-footer__copyright">Generated by
    <a href="http://www.doxygen.org/index.html">
    <b>doxygen</b></a> 1.8.15
  </p>
</section>
</div>
</main>
</div>
</body>
</html>
