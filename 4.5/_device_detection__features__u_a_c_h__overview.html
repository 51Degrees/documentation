<!-- HTML header for doxygen 1.8.15-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.15"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>51Degrees API Documentation: UA-CH Overview</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="examplegrabber.js"></script>
<script type="text/javascript" src="testedversionsgrabber.js"></script>
<script type="text/javascript" src="search51.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(initResizable);
/* @license-end */</script>
<link href="docs-main.min.css" rel="stylesheet" type="text/css" />
</head>
<body class="l-docs-index p-doxygen">
<div class="l-index__content">
<!--div id="top"--><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea" class="g-header g-header--docs">
  <h1 class="c-brand">
  <a id="projectlogo" href="index.html" class="c-brand__link"><img class="c-brand__image" alt="Logo" src="logo-51Degrees-Docs.png" style="width:172px;"/></a>
  <span class="c-tagline">51Degrees API Documentation
   &#160;<span id="projectnumber">4.5</span>
  </span>
  </h1>
  <div id="projectalign" style="padding-left: 0.5em;">
  </div>
  <div id="main-nav"></div>
  <section class="g-search">
    <div class="c-search is-openable" id="searchOpenable">
    <form class="c-search__form">
      <div class="b-form-group b-form-group--with-icon">
        <label for="inputSearch" class="b-text--hidden">Search</label>
        <img src="icon-search.svg" class="b-icon" alt="Search" />
        <input type="text" class="c-search__input" id="inputSearch" onkeyup="javascript:onSearch(this,event.keyCode)" placeholder="Search" aria-label="Search">
      </div>
    </form>
    <div class="c-search__content" id="searchContent">
    </div>
  </div> 
  </section>
</div>
<!-- end header part -->
<main class="g-main">
<!-- Generated by Doxygen 1.8.15 -->
<!-- top -->
	<div class="g-docs__sidenav">																														         <nav id="nav-tree-contents" class="c-sidenav">																														     <h4 class="c-sidenav__heading">Documentation</h4>																									         <div id="nav-sync" class="sync"></div>
  <ul class="c-sidenav__list">																														     </ul>																																				   </nav>    </div><script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('_device_detection__features__u_a_c_h__overview.html','');});
/* @license-end */
</script>
<div id="doc-content" class="g-docs__content">
<div class="PageDoc"><div class="g-docs__header">
<div class="c-breadcrumb">
  <ul class="c-breadcrumb">
<li class="c-breadcrumb__item"><a class="c-breadcrumb__link" href="_device_detection__index.html">Device Detection</a></li><li class="c-breadcrumb__item"><a class="c-breadcrumb__link" href="_device_detection__features__index.html">Device Detection Features</a></li><li class="c-breadcrumb__item"><a class="c-breadcrumb__link" href="_device_detection__features__u_a_c_h__index.html">User-Agent Client Hints</a></li><li class="c-breadcrumb__item"><a class="c-breadcrumb__link" href="_device_detection__features__u_a_c_h__overview.html">UA-CH Overview</a></li>  </ul>
</div>
<h2 class="g-docs__page-title">UA-CH Overview </h2></div><!--header-->
<div class="g-docs__inner">
<div class="g-docs__primary" id="primary">
<section class="g-docs__section"><h1 class="g-docs__section-heading">Introduction</h1>
<p>User-Agent Client Hints (UA-CH) are part of a Google proposal to replace the existing User-Agent HTTP header.</p>
<p>This page gives an overview of UA-CH detection in our API and guidance on which of several possible mechanisms to use based on your use-case.</p>
<p>There are two ways to retrieve UA-CH values. You can either set HTTP headers in your response to the user's browser to ask it to send UA-CH values as HTTP headers, or you can use a JavaScript API to retrieve the UA-CH values on the client. See the <a class="el" href="_device_detection__features__u_a_c_h__overview.html#UACH_Guidance">Guidance</a> section below if you're unsure which to use.</p>
<p>This topic has the following subpages:</p>
<ul>
<li><a class="el" href="_device_detection__features__u_a_c_h__headers.html">Headers</a> - How to use UA-CH HTTP headers with our API.</li>
<li><a class="el" href="_device_detection__features__u_a_c_h__javascript.html">JavaScript</a> - How to use the UA-CH JavaScript API with our API.</li>
<li><a class="el" href="_device_detection__features__u_a_c_h__required_uach_headers.html">Required Values</a> - Which UA-CH values do I need?</li>
</ul>
<p>In addition, we have examples that demonstrate detection using UA-CH in a variety of scenarios:</p>
<ul>
<li><a class="el" href="_device_detection__examples__getting_started__console__on_premise.html">On-premise console</a></li>
<li><a class="el" href="_device_detection__examples__getting_started__web__on_premise.html">On-premise web page</a></li>
<li><a class="el" href="_device_detection__examples__getting_started__console__cloud.html">Cloud console</a></li>
<li><a class="el" href="_device_detection__examples__getting_started__web__cloud.html">Cloud web page</a></li>
<li>Our <a class="el" href="_services__configurator.html">Configurator</a> site includes an example (visible after the Resource Key generation) for how to implement a full client-side solution that calls our cloud service directly.</li>
</ul>
<p>The console examples pass UA-CH values directly to the API, so will work in any situation. The web examples run as a simple web page, so you will need a browser that supports UA-CH such as Chrome, Edge or other Chromium-based browsers in order to try them out.</p>
<h1 class="g-docs__section-heading">Support for detection from Client Hints <a href="#UACH_Support">#</a><a class="anchor" id="UACH_Support"></a></h1>
<p>The 51Degrees Device Detection API has provided support for detection based on one of the Client Hints headers (Sec-CH-UA) in data files from 7 December 2020. Full support for the detection of devices, operating systems, and browsers from UA-CH headers was added in Version 4.4 and data files from <a href="https://51degrees.com/blog/updates-to-user-agent-client-hints-version-4-4">June 2022 onwards</a>.</p>
<p>This support also includes <a href="https://51degrees.com/blog/windows-11-detectable-with-uach">identifying Windows 11 using User-Agent Client Hints</a> as there is <a href="https://docs.microsoft.com/en-us/microsoft-edge/web-platform/how-to-detect-win11">no other way to do so</a>.</p>
<p>Support for getting values using the UA-CH <a href="https://developer.mozilla.org/en-US/docs/Web/API/User-Agent_Client_Hints_API">JavaScript API</a> was added in .NET API version 4.4.19 and data files from 6th March 2023. (Dates for availability in other APIs TBC)</p>
<h1 class="g-docs__section-heading">Guidance <a href="#UACH_Guidance">#</a><a class="anchor" id="UACH_Guidance"></a></h1>
<p>UA-CH has several different mechanisms for accessing these values. This section explains our recommendations for different use-cases.</p>
<ul>
<li>Our Pipeline API is running on-premise on the web server sending responses to the end-user:<ul>
<li>If you are using our web integration, ensure the <code>SetHeaderBrowserAccept-CH</code>, <code>SetHeaderHardwareAccept-CH</code> and <code>SetHeaderPlatformAccept-CH</code> properties are included (all properties are included by default for on-premise). Our software will ensure the <code>Accept-CH</code> header is set to request the client hints you need from the browser.</li>
<li>If you are not using our web integration, see the 'non-integrated' section on the <a class="el" href="_device_detection__features__u_a_c_h__headers.html">UA-CH Headers page</a></li>
</ul>
</li>
<li>Our Pipeline API is running on-premise as part of a system that is not serving responses to end-users directly:<ul>
<li>Ideally, we recommend you ask your clients to set <code>Delegate-CH</code> meta http-equiv tag or set the <code>Permissions-Policy</code> and <code>Accept-CH</code> response headers. This will allow their user's browser to send UA-CH values to your service. See the 'B2B service supplier' section on the <a class="el" href="_device_detection__features__u_a_c_h__headers.html">UA-CH Headers page</a> for instructions.</li>
<li>If the above is not feasible, and/or you want a backup option in case your clients do not implement the required changes, then you can use the UA-CH JavaScript API to retrieve the values. See the 'non-integrated' section on the <a class="el" href="_device_detection__features__u_a_c_h__javascript.html">UA-CH JavaScript page</a> for instructions.</li>
</ul>
</li>
<li>Calling our cloud service from client-side code:<ul>
<li>For best performance, set <code>Delegate-CH</code> meta http-equiv tag or <code>Permissions-Policy</code> and <code>Accept-CH</code> response headers as described in the 'Cloud' section on the <a class="el" href="_device_detection__features__u_a_c_h__headers.html">UA-CH Headers page</a></li>
<li>If making the changes for the option above is not feasible, you can simply ensure your Resource Key includes the <code>JavascriptGetHighEntropyValues</code> property. This will gather the values and send them to our cloud service without any other changes required.</li>
</ul>
</li>
</ul>
<h1 class="g-docs__section-heading">Background reading <a href="#UACH_Background">#</a><a class="anchor" id="UACH_Background"></a></h1>
<p>The authors of the proposal have created an <a href="https://web.dev/user-agent-client-hints">article</a> covering how UA-CH works. 51Degrees has <a href="https://51degrees.com/resources/blogs/tag/Client%20Hints">blogged extensively</a> on the subject. We also have an <a href="https://learnclienthints.com/">explainer</a> and a <a href="https://51degrees.com/client-hints">test page</a> that shows how UA-CH headers interact with the Accept-CH and Permissions-Policy response headers.</p>
<p>In May 2021, Google <a href="https://blog.chromium.org/2021/05/update-on-user-agent-string-reduction.html">outlined</a> their plans for the rollout of UA-CH. This also mentioned that the deprecation of the existing User-Agent will not happen until at least 2022. In September 2021, there was <a href="https://blog.chromium.org/2021/09/user-agent-reduction-origin-trial-and-dates.html">further detail</a> about the plan for the phased deprecation of the User-Agent. This will start with Chrome 101 (roughly Q2 2022) and end with Chrome 113 (roughly Q2 2023).</p>
<p>User-Agent Client Hints extends the previously existing Client Hints content negotiation feature.</p>
<p>There is documentation of the general Client Hints feature on <a href="https://developer.mozilla.org/en-US/docs/Glossary/Client_hints">MDN</a> and from <a href="https://web.dev/user-agent-client-hints/">Google</a>.</p>
<p>Caniuse.com can be used to check browser support for both <a href="https://caniuse.com/client-hints-dpr-width-viewport">Client Hints</a> and <a href="https://caniuse.com/mdn-api_navigator_useragentdata">User-Agent Client Hints</a>.</p>
<p>Finally, on 28 September 2022, we hosted a webinar discussing User-Agent Client Hints and the future of the User-Agent. <a href="https://vimeo.com/755026259">Watch the webinar recording here</a>. </p>
</section></div><!-- PageDoc -->
</div><!-- primary -->
</div><!-- inner-->
<!-- HTML footer for doxygen 1.8.15-->
<!-- start footer part -->
<section id="nav-path" class="g-footer g-footer--docs"><!-- id is needed for treeview function! -->
    <p class="g-footer__copyright">Generated by
    <a href="http://www.doxygen.org/index.html">
    <b>doxygen</b></a> 1.8.15
  </p>
</section>
</div>
</main>
</div>
</body>
</html>
