<!-- HTML header for doxygen 1.8.15-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.15"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>51Degrees API Documentation: False Positives</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="examplegrabber.js"></script>
<script type="text/javascript" src="testedversionsgrabber.js"></script>
<script type="text/javascript" src="search51.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(initResizable);
/* @license-end */</script>
<link href="docs-main.min.css" rel="stylesheet" type="text/css" />
</head>
<body class="l-docs-index p-doxygen">
<div class="l-index__content">
<!--div id="top"--><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea" class="g-header g-header--docs">
  <h1 class="c-brand">
  <a id="projectlogo" href="index.html" class="c-brand__link"><img class="c-brand__image" alt="Logo" src="logo-51Degrees-Docs.png" style="width:172px;"/></a>
  <span class="c-tagline">51Degrees API Documentation
   &#160;<span id="projectnumber">4.5</span>
  </span>
  </h1>
  <div id="projectalign" style="padding-left: 0.5em;">
  </div>
  <div id="main-nav"></div>
  <section class="g-search">
    <div class="c-search is-openable" id="searchOpenable">
    <form class="c-search__form">
      <div class="b-form-group b-form-group--with-icon">
        <label for="inputSearch" class="b-text--hidden">Search</label>
        <img src="icon-search.svg" class="b-icon" alt="Search" />
        <input type="text" class="c-search__input" id="inputSearch" onkeyup="javascript:onSearch(this,event.keyCode)" placeholder="Search" aria-label="Search">
      </div>
    </form>
    <div class="c-search__content" id="searchContent">
    </div>
  </div> 
  </section>
</div>
<!-- end header part -->
<main class="g-main">
<!-- Generated by Doxygen 1.8.15 -->
<!-- top -->
	<div class="g-docs__sidenav">																														         <nav id="nav-tree-contents" class="c-sidenav">																														     <h4 class="c-sidenav__heading">Documentation</h4>																									         <div id="nav-sync" class="sync"></div>
  <ul class="c-sidenav__list">																														     </ul>																																				   </nav>    </div><script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('_device_detection__features__false_positive_control.html','');});
/* @license-end */
</script>
<div id="doc-content" class="g-docs__content">
<div class="PageDoc"><div class="g-docs__header">
<div class="c-breadcrumb">
  <ul class="c-breadcrumb">
<li class="c-breadcrumb__item"><a class="c-breadcrumb__link" href="_device_detection__index.html">Device Detection</a></li><li class="c-breadcrumb__item"><a class="c-breadcrumb__link" href="_device_detection__features__index.html">Device Detection Features</a></li><li class="c-breadcrumb__item"><a class="c-breadcrumb__link" href="_device_detection__features__false_positive_control.html">False Positives</a></li>  </ul>
</div>
<h2 class="g-docs__page-title">False Positives </h2></div><!--header-->
<div class="g-docs__inner">
<div class="g-docs__primary" id="primary">
<section class="g-docs__section"><h1 class="g-docs__section-heading">Introduction</h1>
<p>Most device detection solutions rely primarily on the User-Agent HTTP header. However, the content of this header can be any string at all. This inevitably leads to situations where finding an exact match to a previously observed User-Agent is not possible.</p>
<p>A false positive occurs when the service tells you it has found a match but in reality the details provided are incorrect.</p>
<p>In these scenarios, different use cases often demand different responses. 51Degrees Device Detection allows the developer to determine exactly what happens.</p>
<h1 class="g-docs__section-heading">HasValue</h1>
<p>The Device Detection API returns many different properties. Every single one of these can either have a specified value or not.</p>
<p>Each language implements this differently but in all cases, there will be some form of <code>HasValue</code> method or property associated with each result property. Where <code>HasValue</code> is false, accessing the property value will cause an exception to be returned or thrown (depending on the language).</p>
<p>The detail associated with this exception will explain why the property does not have a specified value.</p>
<h1 class="g-docs__section-heading">No Match Found</h1>
<p>In some cases, the device detection algorithm can fail to find any match at all for the supplied evidence.</p>
<p>The <code>AllowUnmatched</code> setting can be used to control what happens in this situation.</p>
<p>If <code>AllowUnmatched</code> is false (default) then no result will be returned and <code>HasValue</code> will be false for the requested properties.</p>
<p>If <code>AllowUnmatched</code> is true then the default <a class="el" href="_pipeline_api__concepts__flow_elements__fifty_one_on_premise_engine.html#PipelineApi_Concepts_FlowElements_FiftyOneOnPremiseEngine_Profiles">profile</a> will be returned.</p>
<p>The default <a class="el" href="_pipeline_api__concepts__flow_elements__fifty_one_on_premise_engine.html#PipelineApi_Concepts_FlowElements_FiftyOneOnPremiseEngine_Profiles">profile</a> has specific values for properties but they may be incorrect. For example, the default hardware profile has <code>IsMobile = false</code>. In reality, if no match was found then we have no idea if the device is a mobile device or not.</p>
<h1 class="g-docs__section-heading">Bad Match</h1>
<p>The <code>Difference</code> value is used to measure how different a potential match is from the supplied evidence. The <code>Drift</code> value is used to measure how far a matching substring is from it's expected position.</p>
<p>The maximum allowable <code>Difference</code> and <code>Drift</code> values can be set when the engine is created. This is used to control how far the supplied evidence is allowed to differ from the real-world training data that was used to create the data file.</p>
<p>For example, if the maximum <code>Difference</code> value is set to 0 (default) then a match will only be returned if the difference value is 0.</p>
<p>If the maximum <code>Difference</code> or <code>Drift</code> setting prevents any result from being returned then <code>HasValue</code> will be false for the requested properties.</p>
<p>By default, <code>Difference</code> and <code>Drift</code> are set to 0 (i.e., no deviation from the expected substrings is permitted). Setting them to -1 will mean that there is no limit. However, note that this often results in highly inaccurate results and does not guarantee a match will always be found.</p>
<h1 class="g-docs__section-heading">Match metadata</h1>
<p>Regardless of the settings used, the result will return additional metadata that can be queried to find out details about the match.</p>
<p><code>Difference</code> - Contains the difference value between the supplied evidence and the returned match.</p>
<p><code>UserAgents</code> - Contains a list of the matching substrings from the User-Agent.</p>
<p><code>Drift</code> - Contains the drift value between the supplied evidence and the returned match.</p>
<p><code>MatchedNodes</code> - The number of 'nodes' in the <a class="el" href="_device_detection__hash.html">hash</a> tree where a match was found. If this is zero then no match was found.</p>
<p><code>Method</code> - The method used to find a match. 'EXACT' indicates an exact match. 'NONE' indicates no match. Any other value is the name of the technique used to find the result that best matches the supplied evidence.</p>
<h1 class="g-docs__section-heading">The 'Unknown' value</h1>
<p>Previous versions of the Device Detection API were unable to indicate that a property did not have a value.</p>
<p>Therefore, in the past, the string values <code>Unknown</code> or <code>N/A</code> were used to indicate that the API did not have a value for a particular property.</p>
<p>These values are treated as distinct from <code>HasValue</code>, i.e., it is possible for <code>HasValue</code> to return <code>true</code> and <code>Value</code> to return <code>Unknown</code>.</p>
<p>In the future, this may be changed so that <code>HasValue</code> will return false if <code>Value</code> is <code>Unknown</code>, <code>N/A</code>, or similar, but this is not currently planned.</p>
<h1 class="g-docs__section-heading">Use cases</h1>
<ul>
<li><p class="startli"><b>I only want a result if the API is reasonably sure it is correct.</b></p>
<p class="startli">Set <code>AllowUnmatched</code> to false.</p>
<p class="startli">Set <code>Difference</code> and <code>Drift</code> to 10.</p>
</li>
<li><p class="startli"><b>I only want exact matches to previously observed User-Agents (default configuration).</b></p>
<p class="startli">Set <code>AllowUnmatched</code> to false.</p>
<p class="startli">Set <code>Difference</code> and <code>Drift</code> to 0.</p>
<p class="startli">These settings will mean that a result is only returned if it exactly matches a unique substring from a User-Agent that has been included when building the data file.</p>
</li>
<li><p class="startli"><b>If there is no match found then I want the API to assume that the device is a desktop running an unknown operating system.</b></p>
<p class="startli">Set <code>AllowUnmatched</code> to true.</p>
<p class="startli"><code>Difference</code> and <code>Drift</code> do not influence this use case.</p>
<p class="startli">This setting will cause the default (desktop) profiles to be returned if there is no match.</p>
</li>
<li><p class="startli"><b>I'm migrating from 51Degrees V3 Device Detection and want to retain the previous functionality.</b></p>
<p class="startli">OR</p>
<p class="startli"><b>I want to keep my code simple as possible. I'm not worried about some false positives.</b></p>
<p class="startli">Set <code>AllowUnmatched</code> to true.</p>
<p class="startli">Set <code>Difference</code> (and <code>Drift</code> if using <a class="el" href="_device_detection__hash.html">Hash</a>) to -1.</p>
<p class="startli">These settings will mean that <code>HasValue</code> is never false. Each property will always have a value so you don't need to worry about dealing with a situation where they do not. </p>
</li>
</ul>
</section></div><!-- PageDoc -->
</div><!-- primary -->
</div><!-- inner-->
<!-- HTML footer for doxygen 1.8.15-->
<!-- start footer part -->
<section id="nav-path" class="g-footer g-footer--docs"><!-- id is needed for treeview function! -->
    <p class="g-footer__copyright">Generated by
    <a href="http://www.doxygen.org/index.html">
    <b>doxygen</b></a> 1.8.15
  </p>
</section>
</div>
</main>
</div>
</body>
</html>
