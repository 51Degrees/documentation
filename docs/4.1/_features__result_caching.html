<!-- HTML header for doxygen 1.8.15-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.15"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>51Degrees Pipeline Documentation: Result Caching</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="examplegrabber.js"></script>
<script type="text/javascript" src="search51.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(initResizable);
/* @license-end */</script>
<link href="docs-main.min.css" rel="stylesheet" type="text/css" />
</head>
<body class="l-docs-index p-doxygen">
<div class="l-index__content">
<!--div id="top"--><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea" class="g-header g-header--docs">
  <h1 class="c-brand">
  <a id="projectlogo" href="index.html" class="c-brand__link"><img class="c-brand__image" alt="Logo" src="logo-51Degrees-Docs.png"/></a>
  <span class="c-tagline">51Degrees Pipeline Documentation
   &#160;<span id="projectnumber">4.1</span>
  </span>
  </h1>
  <div id="projectalign" style="padding-left: 0.5em;">
  </div>
  <div id="main-nav"></div>
  <section class="g-search">
    <div class="c-search is-openable" id="searchOpenable">
    <form class="c-search__form">
      <div class="b-form-group b-form-group--with-icon">
        <label for="inputSearch" class="b-text--hidden">Search</label>
        <img src="icon-search.svg" class="b-icon" alt="Search" />
        <input type="text" class="c-search__input" id="inputSearch" onkeyup="javascript:onSearch(this,event.keyCode)" placeholder="Search" aria-label="Search">
      </div>
    </form>
    <div class="c-search__content" id="searchContent">
    </div>
  </div> 
  </section>
</div>
<!-- end header part -->
<main class="g-main">
<!-- Generated by Doxygen 1.8.15 -->
<!-- top -->
	<div class="g-docs__sidenav">																														         <nav id="nav-tree-contents" class="c-sidenav">																														     <h4 class="c-sidenav__heading">Documentation</h4>																									         <div id="nav-sync" class="sync"></div>
  <ul class="c-sidenav__list">																														     </ul>																																				   </nav>    </div><script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('_features__result_caching.html','');});
/* @license-end */
</script>
<div id="doc-content" class="g-docs__content">
<div class="PageDoc"><div class="g-docs__header">
<div class="c-breadcrumb">
  <ul class="c-breadcrumb">
<li class="c-breadcrumb__item"><a class="c-breadcrumb__link" href="_features__index.html">Features</a></li><li class="c-breadcrumb__item"><a class="c-breadcrumb__link" href="_features__result_caching.html">Result Caching</a></li>  </ul>
</div>
<h2 class="g-docs__page-title">Result Caching </h2></div><!--header-->
<div class="g-docs__inner">
<div class="g-docs__primary" id="primary">
<section class="g-docs__section"><h1 class="g-docs__section-heading">Introduction</h1>
<p><b>Results caching</b> refers to a cache that exists at the level of an <a class="el" href="_concepts__flow_elements__aspect_engine.html">aspect engine</a>. If <b>caching</b> is enabled then when a request arrives at the <a class="el" href="_concepts__flow_elements__aspect_engine.html">aspect engine</a>, it will first check to see if it has recently processed a request with the same evidence. If it has then the result determined from the previous processing will be returned without any further work being required.</p>
<p><b>Results caching</b> will provide improved performance in most scenarios where the processing time of an <a class="el" href="_concepts__flow_elements__aspect_engine.html">aspect engine</a> is significant. However, profiling should always be undertaken to ensure that the configuration used is returning real benefit in the relevant environment.</p>
<p>Note that some <a class="el" href="_concepts__flow_elements__aspect_engine.html">aspect engines</a> (for example, the 51Degrees on-premise <a class="el" href="_device_detection__overview.html">device detection</a> engine) may have internal caches for various reasons, these are separate to the <a class="el" href="_concepts__pipeline.html">Pipeline</a> <b>results cache</b> and may or may not be configurable depending on the implementation of the <a class="el" href="_concepts__flow_elements__aspect_engine.html">aspect engine</a>.</p>
<h1 class="g-docs__section-heading">Internals</h1>
<p>The <a class="el" href="_concepts__data__evidence.html">evidence</a> encapsulated within <a class="el" href="_concepts__data__flow_data.html">flow data</a> will often contain many more values than are relevant to a particular <a class="el" href="_concepts__flow_elements__aspect_engine.html">aspect engine</a>. Consequently, we don't want to use the whole of the <a class="el" href="_concepts__data__evidence.html">evidence</a> structure as a key to the <b>results cache</b>.</p>
<p>Instead, we make use of the <a class="el" href="_concepts__data__evidence_key_filter.html">evidence key filter</a> on an <a class="el" href="_concepts__flow_elements__aspect_engine.html">aspect engine</a> to produce a <a class="el" href="_concepts__data__data_key.html">data key</a> for the sub-set of the total <a class="el" href="_concepts__data__evidence.html">evidence</a> that the <a class="el" href="_concepts__flow_elements__aspect_engine.html">aspect engine</a> will make use of.</p>
<p>This <a class="el" href="_concepts__data__data_key.html">data key</a> is then used to access the <b>cache</b> and check for an existing result. If one is found then it will be added to the <a class="el" href="_concepts__data__flow_data.html">flow data</a> as normal. If not, the <a class="el" href="_concepts__flow_elements__aspect_engine.html">aspect engine</a> performs the usual processing and then stores the result in the cache using the <a class="el" href="_concepts__data__data_key.html">data key</a>.</p>
<p>Below is a flow chart illustrating this process.</p>
<p><div class="dotgraph">
<iframe scrolling="no" frameborder="0" src="dot_resultcache.svg" width="571" height="306"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</p>
<h1 class="g-docs__section-heading">Configuration</h1>
<p>The <b>result cache</b> can be configured using the <a class="el" href="_concepts__configuration__builders__element_builder.html">element builder</a> associated with the <a class="el" href="_concepts__flow_elements__aspect_engine.html">aspect engine</a>.</p>
<p>Any cache that implements the 51Degrees cache interface can be used, but by default we provide a relatively simple shared LRU (least recently used) cache which has a low overhead, copes well with concurrent access and enables good performance in a wide range of scenarios.</p>
<p>This cache has a single 'size' parameter that determines how many result instances will be stored. Increasing this value will generally improve performance at the cost of increased memory usage. Profiling should always be used to determine appropriate settings for your use-case.</p>
<h1 class="g-docs__section-heading">Examples</h1>
<p>We provide <a class="el" href="_examples__caching.html">examples</a> on how to enable <b>result caching</b> for each language where it is supported. Additionally, there are <a class="el" href="_examples__custom_cache.html">examples</a> on implementing and using a custom caching implementation. </p>
</section></div><!-- PageDoc -->
</div><!-- primary -->
</div><!-- inner-->
<!-- HTML footer for doxygen 1.8.15-->
<!-- start footer part -->
<section id="nav-path" class="g-footer g-footer--docs"><!-- id is needed for treeview function! -->
    <p class="g-footer__copyright">Generated by
    <a href="http://www.doxygen.org/index.html">
    <b>doxygen</b></a> 1.8.15
  </p>
</section>
</div>
</main>
</div>
</body>
</html>
