<!-- HTML header for doxygen 1.8.15-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.15"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>51Degrees API Documentation: Aspect Engine</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="examplegrabber.js"></script>
<script type="text/javascript" src="testedversionsgrabber.js"></script>
<script type="text/javascript" src="search51.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(initResizable);
/* @license-end */</script>
<link href="docs-main.min.css" rel="stylesheet" type="text/css" />
</head>
<body class="l-docs-index p-doxygen">
<div class="l-index__content">
<!--div id="top"--><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea" class="g-header g-header--docs">
  <h1 class="c-brand">
  <a id="projectlogo" href="index.html" class="c-brand__link"><img class="c-brand__image" alt="Logo" src="logo-51Degrees-Docs.png" style="width:172px;"/></a>
  <span class="c-tagline">51Degrees API Documentation
   &#160;<span id="projectnumber">4.4</span>
  </span>
  </h1>
  <div id="projectalign" style="padding-left: 0.5em;">
  </div>
  <div id="main-nav"></div>
  <section class="g-search">
    <div class="c-search is-openable" id="searchOpenable">
    <form class="c-search__form">
      <div class="b-form-group b-form-group--with-icon">
        <label for="inputSearch" class="b-text--hidden">Search</label>
        <img src="icon-search.svg" class="b-icon" alt="Search" />
        <input type="text" class="c-search__input" id="inputSearch" onkeyup="javascript:onSearch(this,event.keyCode)" placeholder="Search" aria-label="Search">
      </div>
    </form>
    <div class="c-search__content" id="searchContent">
    </div>
  </div> 
  </section>
</div>
<!-- end header part -->
<main class="g-main">
<!-- Generated by Doxygen 1.8.15 -->
<!-- top -->
	<div class="g-docs__sidenav">																														         <nav id="nav-tree-contents" class="c-sidenav">																														     <h4 class="c-sidenav__heading">Documentation</h4>																									         <div id="nav-sync" class="sync"></div>
  <ul class="c-sidenav__list">																														     </ul>																																				   </nav>    </div><script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('_concepts__flow_elements__aspect_engine.html','');});
/* @license-end */
</script>
<div id="doc-content" class="g-docs__content">
<div class="PageDoc"><div class="g-docs__header">
<div class="c-breadcrumb">
  <ul class="c-breadcrumb">
<li class="c-breadcrumb__item"><a class="c-breadcrumb__link" href="_concepts__index.html">Concepts</a></li><li class="c-breadcrumb__item"><a class="c-breadcrumb__link" href="_concepts__flow_elements__index.html">Flow Elements</a></li><li class="c-breadcrumb__item"><a class="c-breadcrumb__link" href="_concepts__flow_elements__aspect_engine.html">Aspect Engine</a></li>  </ul>
</div>
<h2 class="g-docs__page-title">Aspect Engine </h2></div><!--header-->
<div class="g-docs__inner">
<div class="g-docs__primary" id="primary">
<section class="g-docs__section"><h1 class="g-docs__section-heading">Introduction</h1>
<p>An <b>aspect engine</b> builds on the <a class="el" href="_concepts__flow_elements__flow_element.html">flow element</a> concept to introduce the ability to:</p><ul>
<li>cache processing results</li>
<li>handle cases where a property has not been populated by an <b>aspect engine</b>, but it could be if certain configuration changes were made</li>
<li><a class="el" href="_features__lazy_loading.html">lazily load</a> values in the <a class="el" href="_concepts__data__flow_data.html">flow data</a></li>
</ul>
<p>In the same way a <a class="el" href="_concepts__flow_elements__flow_element.html">flow element</a> can produce an <a class="el" href="_concepts__data__element_data.html">element data</a> containing results of its processing, an <b>engine</b> can produce an <a class="el" href="_concepts__data__aspect_data.html">aspect data</a>. This builds on <a class="el" href="_concepts__data__element_data.html">element data</a> to add some of the extra functionality listed above.</p>
<p>See the <a href="https://github.com/51Degrees/specifications/blob/main/pipeline-specification/conceptual-overview.md#aspect-engine">Specification</a> for more technical details.</p>
<h1 class="g-docs__section-heading">Caching</h1>
<p>For performance reasons, it may be desirable to add results <a class="el" href="_features__result_caching.html">caching</a> to an <b>engine</b> which has a particularly large overhead for processing.</p>
<p>Logic in an <b>engine</b> makes use of a cache passed at construction time to avoid doing any processing when a result has already been found for a certain set of <a class="el" href="_concepts__data__evidence.html">evidence</a>. The key for this cache is a <a class="el" href="_concepts__data__data_key.html">data key</a> generated using the <a class="el" href="_concepts__data__evidence_key_filter.html">evidence key filter</a> from the <b>engine</b>. This means that only <a class="el" href="_concepts__data__evidence.html">evidence</a> relevant to the <b>engine</b> is used in the key for the cache, making the cache more space-efficient.</p>
<h1 class="g-docs__section-heading">Missing property handling</h1>
<p>An <b>engine</b> adds handling of cases where a value is requested for a <a class="el" href="_concepts__meta_data__element_properties.html">property</a> that is not available for some reason.</p>
<p>Consider the case where an <b>engine</b> is set up with free data, and the user attempts to retrieve a value for an enterprise <a class="el" href="_concepts__meta_data__element_properties.html">property</a>. An error would be returned stating that the <a class="el" href="_concepts__meta_data__element_properties.html">property</a> was only available in an enterprise <a class="el" href="_concepts__terminology.html#Concepts_Terminology_DataTier">data tier</a>.</p>
<p>Consider another case where an <b>engine</b> has been built with specific <a class="el" href="_concepts__meta_data__element_properties.html">properties</a> included rather than the full set, and the user attempts to retrieve a value for a <a class="el" href="_concepts__meta_data__element_properties.html">property</a> which was not included. An error would be returned stating that the <b>engine</b> was not configured correctly to return values for that <a class="el" href="_concepts__meta_data__element_properties.html">property</a>.</p>
<p>Both these cases are distinct from that, where the <b>engine</b> simply does not know what the <a class="el" href="_concepts__meta_data__element_properties.html">property</a> is, and cannot return values for it. So, it is important to distinguish between these scenarios, and be clear to the user about what they need to do to get access to the property they want.</p>
<h1 class="g-docs__section-heading">Lazy loading</h1>
<p>The <a class="el" href="_concepts__data__aspect_data.html">aspect data</a> produced by an <b>engine</b> can be returned before it has been completely populated. This means that the caller does not need to wait for processing to finish before carrying on with other things, and the processing will continue in the background. This is particularly useful in a <a class="el" href="_concepts__terminology.html#Concepts_Terminology_WebServer">web server</a> where processing can start the instant a <a class="el" href="_concepts__terminology.html#Concepts_Terminology_WebRequest">web request</a> is received, and the <a class="el" href="_concepts__terminology.html#Concepts_Terminology_WebServer">server</a> can continue serving the page until it reaches a point where the result of the processing is needed.</p>
<p>By default, <a class="el" href="_features__lazy_loading.html">lazy loading</a> is not enabled but can be via the <b>engine's</b> builder.</p>
<p>Please note that <a class="el" href="_features__lazy_loading.html">lazy loading</a> is only available in a subset of languages. This is because it either is not possible, or doesn't make sense in some cases. For example, PHP is single threaded so <a class="el" href="_features__lazy_loading.html">lazy loading</a> is not possible. The Node.js <a class="el" href="_concepts__pipeline.html">Pipeline</a> is entirely <a class="el" href="_features__asynchronous_execution.html">asynchronous</a> so a <a class="el" href="_features__lazy_loading.html">lazy loading</a> capability is unnecessary. </p>
</section></div><!-- PageDoc -->
</div><!-- primary -->
</div><!-- inner-->
<!-- HTML footer for doxygen 1.8.15-->
<!-- start footer part -->
<section id="nav-path" class="g-footer g-footer--docs"><!-- id is needed for treeview function! -->
    <p class="g-footer__copyright">Generated by
    <a href="http://www.doxygen.org/index.html">
    <b>doxygen</b></a> 1.8.15
  </p>
</section>
</div>
</main>
</div>
</body>
</html>
