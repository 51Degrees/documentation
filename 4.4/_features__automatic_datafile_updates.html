<!-- HTML header for doxygen 1.8.15-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.15"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>51Degrees API Documentation: Automatic Data File Updates</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="examplegrabber.js"></script>
<script type="text/javascript" src="search51.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(initResizable);
/* @license-end */</script>
<link href="docs-main.min.css" rel="stylesheet" type="text/css" />
</head>
<body class="l-docs-index p-doxygen">
<div class="l-index__content">
<!--div id="top"--><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea" class="g-header g-header--docs">
  <h1 class="c-brand">
  <a id="projectlogo" href="index.html" class="c-brand__link"><img class="c-brand__image" alt="Logo" src="logo-51Degrees-Docs.png" style="width:172px;"/></a>
  <span class="c-tagline">51Degrees API Documentation
   &#160;<span id="projectnumber">4.4</span>
  </span>
  </h1>
  <div id="projectalign" style="padding-left: 0.5em;">
  </div>
  <div id="main-nav"></div>
  <section class="g-search">
    <div class="c-search is-openable" id="searchOpenable">
    <form class="c-search__form">
      <div class="b-form-group b-form-group--with-icon">
        <label for="inputSearch" class="b-text--hidden">Search</label>
        <img src="icon-search.svg" class="b-icon" alt="Search" />
        <input type="text" class="c-search__input" id="inputSearch" onkeyup="javascript:onSearch(this,event.keyCode)" placeholder="Search" aria-label="Search">
      </div>
    </form>
    <div class="c-search__content" id="searchContent">
    </div>
  </div> 
  </section>
</div>
<!-- end header part -->
<main class="g-main">
<!-- Generated by Doxygen 1.8.15 -->
<!-- top -->
	<div class="g-docs__sidenav">																														         <nav id="nav-tree-contents" class="c-sidenav">																														     <h4 class="c-sidenav__heading">Documentation</h4>																									         <div id="nav-sync" class="sync"></div>
  <ul class="c-sidenav__list">																														     </ul>																																				   </nav>    </div><script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('_features__automatic_datafile_updates.html','');});
/* @license-end */
</script>
<div id="doc-content" class="g-docs__content">
<div class="PageDoc"><div class="g-docs__header">
<div class="c-breadcrumb">
  <ul class="c-breadcrumb">
<li class="c-breadcrumb__item"><a class="c-breadcrumb__link" href="_features__index.html">Features</a></li><li class="c-breadcrumb__item"><a class="c-breadcrumb__link" href="_features__automatic_datafile_updates.html">Automatic Data File Updates</a></li>  </ul>
</div>
<h2 class="g-docs__page-title">Automatic Data File Updates </h2></div><!--header-->
<div class="g-docs__inner">
<div class="g-docs__primary" id="primary">
<section class="g-docs__section"><h1 class="g-docs__section-heading">Introduction</h1>
<p><a class="el" href="_concepts__flow_elements__on_premise_engine.html">On-premise engines</a> added to a <a class="el" href="_concepts__pipeline.html">Pipeline</a> can have their data files registered for automatic updates. When there is a new version of a data file available, it will be downloaded and the <a class="el" href="_concepts__flow_elements__on_premise_engine.html">on-premise engine</a> refreshed with it. The file location where the data file was loaded from can also be monitored for changes, so when a data file is manually replaced, the <a class="el" href="_concepts__flow_elements__on_premise_engine.html">on-premise engine</a> will be refreshed with it.</p>
<h1 class="g-docs__section-heading">Registering for Updates</h1>
<p>All data files added to an <a class="el" href="_concepts__flow_elements__on_premise_engine.html">on-premise engine</a> have the option to enable <b>automatic updates</b>. By enabling this, the data file is automatically registered when the <a class="el" href="_concepts__flow_elements__on_premise_engine.html">on-premise engine</a> is added to a <a class="el" href="_concepts__pipeline.html">Pipeline</a>.</p>
<p>A data file can also be manually registered for <b>automatic updates</b> by registering with the <a class="el" href="_features__automatic_datafile_updates.html">data update service</a>. This works in exactly the same way as if it was registered by the <a class="el" href="_concepts__configuration__builders__pipeline_builder.html">pipeline builder</a>, but in most cases is not necessary as the <a class="el" href="_concepts__configuration__builders__pipeline_builder.html">pipeline builder</a> will do this.</p>
<h1 class="g-docs__section-heading">Configuration</h1>
<p>There are a number of configuration options available when registering a data file for <b>automatic updates</b>, which specify when and how the data file is updated.</p>
<h2>Data Update URL</h2>
<p>To download a new data file when one becomes available, the <a class="el" href="_features__automatic_datafile_updates.html">data update service</a> must have a URL to download it from. This can be a constant URL, or a <a class="el" href="_features__automatic_datafile_updates.html#Features_AutomaticDatafileUpdates_UrlFormatter">URL formatter</a> can be used to dynamically generate the URL based on other options.</p>
<h2>License Keys</h2>
<p>A license key may be required when downloading certain types of data file. The <a class="el" href="_features__automatic_datafile_updates.html">data update service</a> uses the license key, in combination with a <a class="el" href="_features__automatic_datafile_updates.html#Features_AutomaticDatafileUpdates_UrlFormatter">URL formatter</a>, to ensure the data file is only made available to licensed users.</p>
<h2>File Watcher</h2>
<p>The location of the data file in the file system can be monitored by enabling the file system watcher. If the data file changes, then the <a class="el" href="_features__automatic_datafile_updates.html">data update service</a> will be called to refresh the <a class="el" href="_concepts__flow_elements__on_premise_engine.html">on-premise engine</a> using that file. This can be useful when distributing data files to a local cluster.</p>
<h2>Polling Interval</h2>
<p>The polling interval tells the <a class="el" href="_features__automatic_datafile_updates.html">data update service</a> the frequency with which to check for the availability of a new data file when the expected date is not known. If the data file itself provides the date when the next update is expected, then the <a class="el" href="_features__automatic_datafile_updates.html">data update service</a> will not check for updates at all until after that date is passed.</p>
<h2>Randomization</h2>
<p>In large clusters of servers, it is beneficial to stagger an update. If all servers download a new data file and refresh at the same time, a service's overall performance can be affected. To prevent this, the randomization option enables a random time interval to be added to the time at which the new data file is downloaded. For example, if there are 10 servers, and a full download and refresh takes around 10 seconds, it is sensible to set the randomization to above 10 seconds. In this case, there should only be one server updating at any one time.</p>
<h2>URL Formatter<a class="anchor" id="Features_AutomaticDatafileUpdates_UrlFormatter"></a></h2>
<p>Where an <a class="el" href="_concepts__flow_elements__on_premise_engine.html">on-premise engine</a> needs to download a data file from a URL which is not constant, a URL formatter is used. <a class="el" href="_concepts__flow_elements__on_premise_engine.html">On-premise engines</a> generally provide the correct URL formatter automatically, but the option to override this is available.</p>
<p>URL formatters are necessary in many cases where multiple data files are available for an <a class="el" href="_concepts__flow_elements__on_premise_engine.html">on-premise engine</a>. For example, the required format or version of the data file may need to be specified as a parameter in the URL. This is handled by the URL formatter by looking at the current data file to see what is needed.</p>
<h2>Temporary File</h2>
<p>It is good practice to set a data file to be copied to a temporary location for use by an <a class="el" href="_concepts__flow_elements__on_premise_engine.html">on-premise engine</a>. This means that whatever mode the file is being used in (e.g. in memory or streamed from file) an <b>update</b> can occur smoothly.</p>
<p>By setting the <a class="el" href="_concepts__flow_elements__on_premise_engine.html">on-premise engine</a> to use a temporary file location, the original data file is free to be changed by the <b>autoupdateservice</b>. Once the file has been replaced, the <a class="el" href="_concepts__flow_elements__on_premise_engine.html">on-premise engine</a> will be informed and manage the removal of the temporary file and creation of a new one.</p>
<h2>Decompression</h2>
<p>Data files are often served as GZipped content from their download URL to minimize the amount of data which needs to be downloaded. When this is the case, the <a class="el" href="_features__automatic_datafile_updates.html">data update service</a> will unzip the data file before carrying on with the process.</p>
<p>Usually an <a class="el" href="_concepts__flow_elements__on_premise_engine.html">on-premise engine</a> will set this option, along with the URL/<a class="el" href="_features__automatic_datafile_updates.html#Features_AutomaticDatafileUpdates_UrlFormatter">URL formatter</a>. But if an alternative URL has been set, then this option may need to be overridden too.</p>
<h2>Verify MD5</h2>
<p>A server will often provide the MD5 hash of the data file which it has served in the 'Content-MD5' response header. This can then be checked against that which was actually downloaded to ensure the integrity of the data file. By default this is usually enabled, however not all download servers support it.</p>
<h2>Verify 'If-Modified-Since'</h2>
<p>Unnecessary downloads can be prevented by providing the download server with an 'If-Modified-Since' HTTP header. If this option is enabled (which it is by default for most <a class="el" href="_concepts__flow_elements__on_premise_engine.html">on-premise engines</a>) the 'If-Modified-Since' header will be set to the date at which the current data file was last modified. If there is not a newer data file on the server then the service will not attempt to download a file. </p>
</section></div><!-- PageDoc -->
</div><!-- primary -->
</div><!-- inner-->
<!-- HTML footer for doxygen 1.8.15-->
<!-- start footer part -->
<section id="nav-path" class="g-footer g-footer--docs"><!-- id is needed for treeview function! -->
    <p class="g-footer__copyright">Generated by
    <a href="http://www.doxygen.org/index.html">
    <b>doxygen</b></a> 1.8.15
  </p>
</section>
</div>
</main>
</div>
</body>
</html>
