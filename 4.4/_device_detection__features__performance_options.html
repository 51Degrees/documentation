<!-- HTML header for doxygen 1.8.15-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.15"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>51Degrees API Documentation: Performance Options</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="examplegrabber.js"></script>
<script type="text/javascript" src="search51.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(initResizable);
/* @license-end */</script>
<link href="docs-main.min.css" rel="stylesheet" type="text/css" />
</head>
<body class="l-docs-index p-doxygen">
<div class="l-index__content">
<!--div id="top"--><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea" class="g-header g-header--docs">
  <h1 class="c-brand">
  <a id="projectlogo" href="index.html" class="c-brand__link"><img class="c-brand__image" alt="Logo" src="logo-51Degrees-Docs.png" style="width:172px;"/></a>
  <span class="c-tagline">51Degrees API Documentation
   &#160;<span id="projectnumber">4.4</span>
  </span>
  </h1>
  <div id="projectalign" style="padding-left: 0.5em;">
  </div>
  <div id="main-nav"></div>
  <section class="g-search">
    <div class="c-search is-openable" id="searchOpenable">
    <form class="c-search__form">
      <div class="b-form-group b-form-group--with-icon">
        <label for="inputSearch" class="b-text--hidden">Search</label>
        <img src="icon-search.svg" class="b-icon" alt="Search" />
        <input type="text" class="c-search__input" id="inputSearch" onkeyup="javascript:onSearch(this,event.keyCode)" placeholder="Search" aria-label="Search">
      </div>
    </form>
    <div class="c-search__content" id="searchContent">
    </div>
  </div> 
  </section>
</div>
<!-- end header part -->
<main class="g-main">
<!-- Generated by Doxygen 1.8.15 -->
<!-- top -->
	<div class="g-docs__sidenav">																														         <nav id="nav-tree-contents" class="c-sidenav">																														     <h4 class="c-sidenav__heading">Documentation</h4>																									         <div id="nav-sync" class="sync"></div>
  <ul class="c-sidenav__list">																														     </ul>																																				   </nav>    </div><script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('_device_detection__features__performance_options.html','');});
/* @license-end */
</script>
<div id="doc-content" class="g-docs__content">
<div class="PageDoc"><div class="g-docs__header">
<div class="c-breadcrumb">
  <ul class="c-breadcrumb">
<li class="c-breadcrumb__item"><a class="c-breadcrumb__link" href="_device_detection__index.html">Device Detection</a></li><li class="c-breadcrumb__item"><a class="c-breadcrumb__link" href="_device_detection__features__index.html">Features</a></li><li class="c-breadcrumb__item"><a class="c-breadcrumb__link" href="_device_detection__features__performance_options.html">Performance Options</a></li>  </ul>
</div>
<h2 class="g-docs__page-title">Performance Options </h2></div><!--header-->
<div class="g-docs__inner">
<div class="g-docs__primary" id="primary">
<section class="g-docs__section"><h1 class="g-docs__section-heading">Introduction</h1>
<p>For device detection, as with many computing tasks, there are trade-offs to be made between the performance of the algorithm and memory usage, as well as performance vs adaptability.</p>
<p>Rather than trying to solve this with a one-size-fits-all approach, our Device Detection API allows you to easily configure the solution to suit your requirements.</p>
<p>Be aware that all these options only apply to the on-premise implementation. The cloud solution is inherently far more limited in the range of options you have to adjust performance.</p>
<h1 class="g-docs__section-heading">Performance profile templates</h1>
<p>At the low level, the Device Detection API uses various collections of data from the data file in order to perform detections. These collections may either be fully mapped into memory or accessed via highly optimized <a href="https://en.wikipedia.org/wiki/Cache_replacement_policies#Least_recently_used_(LRU)">LRU caches</a>, with data being loaded from disk on a cache miss.</p>
<p>The mechanism used to access the data, as well as the size of these caches, can be configured specifically. However, we have defined templates which we believe will cover the majority of scenarios.</p>
<p>The exact method for specifying the template will vary by programing language. See the <a class="el" href="_examples__device_detection__performance__on_premise_hash.html">performance examples</a> for a demonstration.</p>
<p>The table below explains the options, from fastest performance and highest memory usage to slowest performance and lowest memory usage.</p>
<div class="g-table g-table--overflow"><table class="c-table">
<tr class="c-table__row--heading">
<td class="c-table__cell">Template Name  </td><td class="c-table__cell">Behavior  </td><td class="c-table__cell">Recommendations   </td></tr>
<tr class="c-table__row">
<td class="c-table__cell">MaxPerformance  </td><td class="c-table__cell">All data from the data file is mapped into main memory at startup. As caches are not needed, data access is lock-free.  </td><td class="c-table__cell">Use when memory usage is not a problem and performance is critical. This configuration is also strongly recommended when the API is running in a highly concurrent environment.   </td></tr>
<tr class="c-table__row">
<td class="c-table__cell">HighPerformance  </td><td class="c-table__cell">Data accessed via caches; caches are large enough that all data from the data file can be accommodated as it is requested over time.  </td><td class="c-table__cell">Generally not recommended. It offers slightly worse performance than MaxPerformance but will grow to the same memory usage over time. Can be useful as a starting point when creating a custom configuration.   </td></tr>
<tr class="c-table__row">
<td class="c-table__cell">Balanced (Default)  </td><td class="c-table__cell">Data accessed via caches; some caches are smaller than the high performance template. However, there is enough space that the most commonly accessed items are retained in memory. As such, loading from the disk is still relatively uncommon (assuming a typical web server workload).  </td><td class="c-table__cell">Fine for generic workloads where there is no extreme memory or performance requirement.   </td></tr>
<tr class="c-table__row">
<td class="c-table__cell">LowMemory  </td><td class="c-table__cell">Data always streamed from disk on-demand.  </td><td class="c-table__cell">Recommended when the lowest possible memory usage is more important than performance.   </td></tr>
</table>
</div><p>The precise values associated with each template can be seen in the source code on <a href="https://github.com/51Degrees/device-detection-cxx/blob/67503df045efb32e84eb59fe7e320772dd6475db/src/hash/hash.c#L177">GitHub</a>.</p>
<h1 class="g-docs__section-heading">Evaluation graphs</h1>
<p>The hash data file includes two different 'graphs' that can be used when trying to find a match, <a class="el" href="_device_detection__hash.html#DeviceDetection_Hash_DataSetProduction_Performance">performance</a> and <a class="el" href="_device_detection__hash.html#DeviceDetection_Hash_DataSetProduction_Predictive">predictive</a>.</p>
<p>The performance graph is significantly faster than predictive, but is less tolerant of differences between the training data and the evaluated User-Agent.</p>
<p>This means that the performance graph is generally recommended when fast matching is the primary concern and the data file is regularly and frequently updated.</p>
<p>In comparison, the predictive graph is recommended when getting an accurate match for every request is the primary concern, particularly when User-Agents are frequently encountered that are not in the training data.</p>
<p>Note that if both graphs are enabled, performance will be used first. Predictive will only then be used if the algorithm fails to find a match with the performance graph.</p>
<p>The default graph options are defined by the performance templates described above. At time of writing, all templates enable predictive and disable performance. This is done in order to maximize accuracy and ensure consistent device detection results between the profiles.</p>
<h1 class="g-docs__section-heading">Restrict properties</h1>
<p>When the device detection engine is created, you can specify exactly which properties you want to be populated in the result. By default, all properties are populated. By limiting the properties to only those that you're actually going to use, performance may be significantly improved.</p>
<p>Internally, detection is actually performed separately for each <b>component</b> (The four components associated with device detection are hardware, operating system, browser, and crawler) This means that if you only want 'IsMobile' and 'HardwareName', which are both hardware properties, then the algorithm can skip the detection for operating system, browser, and crawler.</p>
<p>As with all the performance options, we recommend experimenting to see what effect this has in your specific scenario. See the <a class="el" href="_examples__device_detection__performance__on_premise_hash.html">performance examples</a> for a demonstration of how to specify the properties you want in your language of choice. </p>
</section></div><!-- PageDoc -->
</div><!-- primary -->
</div><!-- inner-->
<!-- HTML footer for doxygen 1.8.15-->
<!-- start footer part -->
<section id="nav-path" class="g-footer g-footer--docs"><!-- id is needed for treeview function! -->
    <p class="g-footer__copyright">Generated by
    <a href="http://www.doxygen.org/index.html">
    <b>doxygen</b></a> 1.8.15
  </p>
</section>
</div>
</main>
</div>
</body>
</html>
